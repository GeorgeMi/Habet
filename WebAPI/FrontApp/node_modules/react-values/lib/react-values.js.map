{"version":3,"file":"react-values.js","sources":["../src/utils/create-component.js","../src/utils/create-factory.js","../src/types/any.js","../src/types/array.js","../src/types/boolean.js","../src/types/date.js","../src/types/map.js","../src/types/number.js","../src/types/object.js","../src/types/set.js","../src/types/string.js"],"sourcesContent":["import React from 'react'\n\nexport default function createComponent(Store) {\n  return class Value extends React.Component {\n    constructor(props, context) {\n      super(props)\n      let { value, defaultValue, store } = props\n      const connected = !store\n      let controlled = false\n\n      if (!store) {\n        if (value !== undefined) {\n          store = new Store(value, props)\n          controlled = true\n        } else {\n          store = new Store(defaultValue, props)\n        }\n      }\n\n      this.state = {\n        connected,\n        controlled,\n        store,\n        value: store.value,\n      }\n    }\n\n    componentDidMount() {\n      const { controlled, store } = this.state\n      this.mounted = true\n\n      this.unsubscribe = store.on(value => {\n        if (!this.mounted) return\n\n        if (controlled) {\n          this.onChange(value)\n        } else {\n          this.setState({ value }, () => this.onChange(this.state.value))\n        }\n      })\n    }\n\n    componentWillUnmount() {\n      this.mounted = false\n      this.unsubscribe()\n    }\n\n    onChange(value) {\n      if (this.props.onChange) {\n        this.props.onChange(value)\n      }\n    }\n\n    render() {\n      const { children, render, disabled = false } = this.props\n      const { controlled, connected, store } = this.state\n      const value = controlled ? this.props.value : this.state.value\n      const transforms = disabled ? store.noops : store.transforms\n      const fn = children || render\n\n      if (controlled) {\n        store.value = value\n      }\n\n      if (!connected) {\n        store.props = this.props\n      }\n\n      if (fn === null) {\n        return null\n      }\n\n      const renderProps = { value, disabled, ...transforms }\n\n      for (const key in store.computeds) {\n        renderProps[key] = store.computeds[key]()\n      }\n\n      const ret = typeof fn === 'function' ? fn(renderProps) : fn\n      return ret\n    }\n  }\n}\n","import React from 'react'\n\nexport default function createFactory(Store, Value) {\n  return (initial, props) => {\n    const store = new Store(initial, props)\n\n    class Connected extends React.Component {\n      static get value() {\n        return store.value\n      }\n\n      render() {\n        return <Value {...this.props} store={store} />\n      }\n    }\n\n    for (const k in store.transforms) {\n      Connected[k] = store.transforms[k]\n    }\n\n    Connected.store = store\n    Connected.displayName = `Connected${Value.displayName}`\n    return Connected\n  }\n}\n","import createComponent from '../utils/create-component'\nimport createFactory from '../utils/create-factory'\n\nclass Store {\n  constructor(value, props = {}, empty) {\n    this.callbacks = []\n    this.value = value === undefined ? empty : value\n    this.transforms = {}\n    this.noops = {}\n    this.computeds = {}\n    this.props = props\n\n    this.define('set', (v, next) => next)\n    this.define('reset', () => this.clone(value))\n    this.define('clear', () => this.clone(empty))\n\n    if (props.onChange) {\n      this.on(props.onChange)\n    }\n  }\n\n  on(callback) {\n    const index = this.callbacks.push(callback) - 1\n    const off = () => (this.callbacks[index] = null)\n    return off\n  }\n\n  clone(v) {\n    return v\n  }\n\n  transform(fn, options = {}) {\n    const { value, callbacks } = this\n    const { mutates = false } = options\n    const current = mutates ? this.clone(value) : value\n    const next = typeof fn === 'function' ? fn(current) : fn\n    this.value = next\n    callbacks.forEach(cb => cb && cb(next))\n  }\n\n  define(name, fn, options) {\n    this.noops[name] = () => {}\n\n    this.transforms[name] = (...args) => {\n      this.transform(v => fn(v, ...args), options)\n    }\n  }\n\n  compute(name, fn) {\n    this.computeds[name] = () => fn(this.value)\n  }\n\n  proxy(method, options = {}) {\n    const { alias = method, mutates = false } = options\n\n    this.define(\n      alias,\n      (v, ...args) => {\n        const ret = v[method](...args)\n        return mutates ? v : ret\n      },\n      options\n    )\n  }\n}\n\nconst Value = createComponent(Store)\nconst createValue = createFactory(Store, Value)\n\nexport { Value, createValue, Store }\n","import createComponent from '../utils/create-component'\nimport createFactory from '../utils/create-factory'\nimport { Store } from './any'\n\nclass ArrayStore extends Store {\n  constructor(value, props) {\n    super(value, props, [])\n\n    this.compute('first', v => v[0])\n    this.compute('last', v => v[Math.max(0, v.length - 1)])\n\n    this.proxy('concat')\n    this.proxy('fill', { mutates: true })\n    this.proxy('filter')\n    this.proxy('flat')\n    this.proxy('flatMap')\n    this.proxy('map')\n    this.proxy('pop', { mutates: true })\n    this.proxy('push', { mutates: true })\n    this.proxy('reverse', { mutates: true })\n    this.proxy('shift', { mutates: true })\n    this.proxy('slice')\n    this.proxy('sort', { mutates: true })\n    this.proxy('splice', { mutates: true })\n    this.proxy('unshift', { mutates: true })\n  }\n\n  clone(value) {\n    return value.slice()\n  }\n}\n\nconst ArrayValue = createComponent(ArrayStore)\nconst createArrayValue = createFactory(ArrayStore, ArrayValue)\n\nexport { ArrayValue, createArrayValue, ArrayStore }\n","import createComponent from '../utils/create-component'\nimport createFactory from '../utils/create-factory'\nimport { Store } from './any'\n\nclass BooleanStore extends Store {\n  constructor(value, props) {\n    super(value, props, false)\n    this.define('toggle', v => !v)\n  }\n}\n\nconst BooleanValue = createComponent(BooleanStore)\nconst createBooleanValue = createFactory(BooleanStore, BooleanValue)\n\nexport { BooleanValue, createBooleanValue, BooleanStore }\n","import createComponent from '../utils/create-component'\nimport createFactory from '../utils/create-factory'\nimport { Store } from './any'\n\nconst SECONDS = 1000\nconst MINUTES = 1000 * 60\nconst HOURS = 1000 * 60 * 60\n\nclass DateStore extends Store {\n  constructor(value, props) {\n    super(value, props, new Date())\n\n    this.compute('date', v => v.getDate())\n    this.compute('hours', v => v.getHours())\n    this.compute('milliseconds', v => v.getMilliseconds())\n    this.compute('minutes', v => v.getMinutes())\n    this.compute('month', v => v.getMonth())\n    this.compute('seconds', v => v.getSeconds())\n    this.compute('year', v => v.getFullYear())\n\n    this.define('setMonth', setMonth)\n    this.proxy('setDate', { mutates: true })\n    this.proxy('setFullYear', { alias: 'setYear', mutates: true })\n    this.proxy('setFullYear', { mutates: true })\n    this.proxy('setHours', { mutates: true })\n    this.proxy('setMilliseconds', { mutates: true })\n    this.proxy('setMinutes', { mutates: true })\n    this.proxy('setSeconds', { mutates: true })\n\n    this.define('incrementDate', (v, n = 1) => incDate(v, n))\n    this.define('incrementHours', (v, n = 1) => incMil(v, n * HOURS))\n    this.define('incrementMilliseconds', (v, n = 1) => incMil(v, n))\n    this.define('incrementMinutes', (v, n = 1) => incMil(v, n * MINUTES))\n    this.define('incrementMonth', (v, n = 1) => incMonth(v, n))\n    this.define('incrementSeconds', (v, n = 1) => incMil(v, n * SECONDS))\n    this.define('incrementYear', (v, n = 1) => incMonth(v, n * 12))\n\n    this.define('decrementDate', (v, n = 1) => incDate(v, 0 - n))\n    this.define('decrementHours', (v, n = 1) => incMil(v, 0 - n * HOURS))\n    this.define('decrementMilliseconds', (v, n = 1) => incMil(v, 0 - n))\n    this.define('decrementMinutes', (v, n = 1) => incMil(v, 0 - n * MINUTES))\n    this.define('decrementMonth', (v, n = 1) => incMonth(v, 0 - n))\n    this.define('decrementSeconds', (v, n = 1) => incMil(v, 0 - n * SECONDS))\n    this.define('decrementYear', (v, n = 1) => incMonth(v, 0 - n * 12))\n  }\n\n  clone(value) {\n    return new Date(value.getTime())\n  }\n}\n\nfunction incMil(v, n) {\n  return new Date(v.getTime() + n)\n}\n\nfunction incDate(v, n) {\n  const d = new Date(v.getTime())\n  d.setDate(d.getDate() + n)\n  return d\n}\n\nfunction incMonth(v, n) {\n  const year = v.getFullYear()\n  const desiredMonth = v.getMonth() + n\n  const desired = new Date(0)\n  desired.setFullYear(year, desiredMonth, 1)\n  desired.setHours(0, 0, 0, 0)\n  const max = days(desired)\n  v.setMonth(desiredMonth, Math.min(max, v.getDate()))\n  return v\n}\n\nfunction setMonth(v, m) {\n  const d = new Date(v.getTime())\n  const year = d.getFullYear()\n  const day = d.getDate()\n  const desired = new Date(0)\n  desired.setFullYear(year, m, 15)\n  desired.setHours(0, 0, 0, 0)\n  const max = days(desired)\n  d.setMonth(m, Math.min(day, max))\n  return d\n}\n\nfunction days(v) {\n  const year = v.getFullYear()\n  const monthIndex = v.getMonth()\n  const lastDayOfMonth = new Date(0)\n  lastDayOfMonth.setFullYear(year, monthIndex + 1, 0)\n  lastDayOfMonth.setHours(0, 0, 0, 0)\n  return lastDayOfMonth.getDate()\n}\n\nconst DateValue = createComponent(DateStore)\nconst createDateValue = createFactory(DateStore, DateValue)\n\nexport { DateValue, createDateValue, DateStore }\n","import createComponent from '../utils/create-component'\nimport createFactory from '../utils/create-factory'\nimport { Store } from './any'\n\nclass MapStore extends Store {\n  constructor(value, props) {\n    super(value, props, new Map())\n\n    this.define('set', (v, ...a) => {\n      const first = a[0]\n      return a.length === 1\n        ? typeof first === 'function' ? first(v) : first\n        : v.set(...a)\n    })\n\n    this.proxy('clear', { mutates: true })\n    this.proxy('delete', { mutates: true })\n    this.proxy('delete', { alias: 'unset', mutates: true })\n  }\n\n  clone(value) {\n    return new Map(value)\n  }\n}\n\nconst MapValue = createComponent(MapStore)\nconst createMapValue = createFactory(MapStore, MapValue)\n\nexport { MapValue, createMapValue, MapStore }\n","import createComponent from '../utils/create-component'\nimport createFactory from '../utils/create-factory'\nimport { Store } from './any'\n\nclass NumberStore extends Store {\n  constructor(value, props) {\n    super(value, props, 0)\n\n    this.define('increment', (v, n = 1) => {\n      const num = typeof n !== 'number' ? 1 : n\n      return Math.min(v + num, this.props.max)\n    })\n\n    this.define('decrement', (v, n = 1) => {\n      const num = typeof n !== 'number' ? 1 : n\n      return Math.max(v - num, this.props.min)\n    })\n  }\n}\n\nconst NumberValue = createComponent(NumberStore)\nconst createNumberValue = createFactory(NumberStore, NumberValue)\n\nNumberValue.defaultProps = {\n  max: Number.MAX_SAFE_INTEGER,\n  min: Number.MIN_SAFE_INTEGER,\n}\n\nexport { NumberValue, createNumberValue, NumberStore }\n","import createComponent from '../utils/create-component'\nimport createFactory from '../utils/create-factory'\nimport { Store } from './any'\n\nclass ObjectStore extends Store {\n  constructor(value, props) {\n    super(value, props, {})\n\n    this.define('set', (v, ...a) => {\n      const first = a[0]\n\n      if (a.length === 1) {\n        return typeof first === 'function' ? first(v) : first\n      }\n\n      const [key, val] = a\n      const clone = { ...v }\n      clone[key] = val\n      return clone\n    })\n\n    this.define('assign', (v, val = {}) => ({ ...v, ...val }))\n    this.define('clear', () => ({}))\n    this.define('delete', unset)\n    this.define('unset', unset)\n  }\n\n  clone(value) {\n    return { ...value }\n  }\n}\n\nfunction unset(v, key) {\n  const clone = { ...v }\n  delete clone[key]\n  return clone\n}\n\nconst ObjectValue = createComponent(ObjectStore)\nconst createObjectValue = createFactory(ObjectStore, ObjectValue)\n\nexport { ObjectValue, createObjectValue, ObjectStore }\n","import createComponent from '../utils/create-component'\nimport createFactory from '../utils/create-factory'\nimport { Store } from './any'\n\nclass SetStore extends Store {\n  constructor(value, props) {\n    super(value, props, new Set())\n\n    this.define(\n      'toggle',\n      (v, val, boolean) => {\n        if (boolean) {\n          return v.add(val)\n        } else {\n          v.delete(val)\n          return v\n        }\n      },\n      { mutates: true }\n    )\n\n    this.proxy('add')\n    this.proxy('clear', { mutates: true })\n    this.proxy('delete', { mutates: true })\n    this.proxy('delete', { alias: 'remove', mutates: true })\n  }\n\n  clone(value) {\n    return new Set(value)\n  }\n}\n\nconst SetValue = createComponent(SetStore)\nconst createSetValue = createFactory(SetStore, SetValue)\n\nexport { SetValue, createSetValue, SetStore }\n","import createComponent from '../utils/create-component'\nimport createFactory from '../utils/create-factory'\nimport { Store } from './any'\n\nclass StringStore extends Store {\n  constructor(value, props) {\n    super(value, props, '')\n    this.proxy('concat')\n    this.proxy('normalize')\n    this.proxy('padEnd')\n    this.proxy('padStart')\n    this.proxy('repeat')\n    this.proxy('replace')\n    this.proxy('slice')\n    this.proxy('substr')\n    this.proxy('substring')\n    this.proxy('toLowerCase')\n    this.proxy('toUpperCase')\n    this.proxy('trim')\n    this.proxy('trimEnd')\n    this.proxy('trimStart')\n  }\n}\n\nconst StringValue = createComponent(StringStore)\nconst createStringValue = createFactory(StringStore, StringValue)\n\nexport { StringValue, createStringValue, StringStore }\n"],"names":["createComponent","Store","props","context","value","defaultValue","store","connected","controlled","undefined","state","mounted","unsubscribe","on","onChange","setState","children","render","disabled","transforms","noops","fn","renderProps","key","computeds","ret","React","Component","createFactory","Value","initial","Connected","k","displayName","empty","callbacks","define","v","next","clone","callback","index","push","off","options","mutates","current","forEach","cb","name","args","transform","method","alias","createValue","ArrayStore","compute","Math","max","length","proxy","slice","ArrayValue","createArrayValue","BooleanStore","BooleanValue","createBooleanValue","SECONDS","MINUTES","HOURS","DateStore","Date","getDate","getHours","getMilliseconds","getMinutes","getMonth","getSeconds","getFullYear","setMonth","n","incDate","incMil","incMonth","getTime","d","setDate","year","desiredMonth","desired","setFullYear","setHours","days","min","m","day","monthIndex","lastDayOfMonth","DateValue","createDateValue","MapStore","Map","a","first","set","MapValue","createMapValue","NumberStore","num","NumberValue","createNumberValue","defaultProps","Number","MAX_SAFE_INTEGER","MIN_SAFE_INTEGER","ObjectStore","val","unset","ObjectValue","createObjectValue","SetStore","Set","boolean","add","delete","SetValue","createSetValue","StringStore","StringValue","createStringValue"],"mappings":"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"}